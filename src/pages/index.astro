---
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero.astro';
import Note from '~/components/widgets/Note.astro';
import Features from '~/components/widgets/Features.astro';
import Content from '~/components/widgets/Content.astro';
import Steps from '~/components/widgets/Steps.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

const metadata = {
  title: '業務管理システムなら | Rakucloud株式会社',
  ignoreTitleTemplate: true,
};

const typewriterWords = ['DX化', 'AIエージェント導入', 'AI活用'];
---

<Layout metadata={metadata}>
  <Hero
    id="home"
    actions={[
      {
        variant: 'primary',
        text: 'お問い合わせ',
        href: '/contact',
      },
      { text: 'ソリューションを見る', href: '#solutions' },
    ]}
    image={{
      src: '~/assets/images/Home.jpeg',
      alt: 'ビジネスのDXを進めるチーム',
    }}
  >
    <Fragment slot="title">
      中小企業でも
      <span
        class="inline-block min-w-[10ch] text-primary"
        data-typewriter
        data-words={JSON.stringify(typewriterWords)}
      >
        {typewriterWords[0]}
      </span>
      をしやすく、
      <span class="block">ベンチャー企業でも標準化しやすい世界へ</span>
    </Fragment>

    <Fragment slot="subtitle">
      我々、Rakucloud株式会社が皆様のビジネス成長を全力でサポートします。業務管理システムの導入から運用まで、
      誰もが活用できる仕組みづくりを共に実現します。
    </Fragment>
  </Hero>

  <Note
    title="Rakucloudの想い"
    description="誰もがシステムを開発・運用し、課題を抽出し、標準化されたプロセスでビジネス成長を促進できる世界をつくります。"
  />

  <Features
    id="solutions"
    tagline="SOLUTIONS"
    title="5つのソリューションで課題を解決"
    subtitle="業務管理のDX化からAI活用まで、ビジネスの成長段階に合わせたサービスをご用意しています。"
    items={[
      {
        title: '楽Platformの開発販売',
        description:
          '全ての業務をひとつで管理できる総合SaaSプラットフォーム。知識がなくてもスピーディーに構築でき、コストと時間を最小限に抑えます。',
        icon: 'tabler:layout-dashboard',
        callToAction: { text: '詳しく見る', href: '/solution/rakuplatform' },
      },
      {
        title: 'Salesforce導入・運用支援',
        description:
          '10年以上、50社以上のプロジェクトを支援してきた知見で、導入計画から全体設計、開発、運用までを伴走します。',
        icon: 'tabler:chart-dots',
        callToAction: { text: '詳しく見る', href: '/solution/salesforce' },
      },
      {
        title: 'AIソリューション開発・導入支援',
        description:
          'RAGやAIエージェントなどの先進技術を活用し、業務の自動化と高度な意思決定を実現。構想策定から運用定着まで伴走します。',
        icon: 'tabler:robot',
        callToAction: { text: '詳しく見る', href: '/solution/ai' },
      },
      {
        title: 'NocoBase導入・開発',
        description:
          'オープンソースのノーコード/ローコード基盤で業務アプリを短期構築。自社ホストや拡張開発まで支援します。',
        icon: 'tabler:blocks',
        callToAction: { text: '詳しく見る', href: '/solution/nocobase' },
      },
      {
        title: '各種SaaSシステム受託開発',
        description:
          'Salesforce以外の業務管理システムやAPI連携も柔軟に対応。最適なサービス選定から開発、保守までワンストップで提供します。',
        icon: 'tabler:cloud',
        callToAction: { text: '詳しく見る', href: '/solution/others' },
      },
    ]}
  />

  <Content
    id="about"
    isReversed
    tagline="ABOUT"
    title="誰もが業務管理システムを使いこなせる未来を"
    items={[
      {
        title: 'DX化・標準化の推進',
        description: '大企業だけでなく中小・ベンチャー企業でも業務管理を定着させるための仕組みづくりを支援します。',
      },
      {
        title: '現場に寄り添う設計',
        description: '属人化ではなく標準化を実現し、組織全体で課題を共有・解決できる運用を目指します。',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1521791136064-7986c2920216?auto=format&fit=crop&w=2070&q=80',
      alt: 'DX化を議論するビジネスパートナー',
    }}
  >
    <Fragment slot="content">
      <p>
        これまで大手企業や投資力のある企業がSFA・CRM・ERPなどの業務管理システムを積極的に導入してきましたが、
        中小企業やベンチャー企業ではDX化や標準化が進んでいないケースが多く見られます。Rakucloud株式会社は、
        こうした企業に寄り添い、誰もが使いこなせる業務管理システムの導入と運用を支援します。
      </p>
    </Fragment>
  </Content>

  <Content
    isAfterContent
    tagline="STORY"
    title="経験に裏づけられた知見"
    items={[
      {
        title: '豊富なプロジェクト経験',
        description:
          '外資系コンサルや大手EC企業で基幹システム開発を担当し、50以上の導入・運用プロジェクトを成功に導いてきました。',
      },
      {
        title: '楽Platformの開発',
        description:
          'お客様に寄り添った業務管理システムが必要だという想いから、総合SaaSプラットフォーム「楽Platform」を自社開発しました。',
      },
      {
        title: '代表 張 壮壮',
        description:
          '多様な業界の課題に向き合ってきた経験を活かし、お客様のビジネス成長を支えるパートナーとして伴走します。',
      },
    ]}
    image={{
      src: '~/assets/images/ceo.png',
      alt: '代表 張 壮壮の写真',
    }}
  >
    <Fragment slot="content">
      <p>
        外資系コンサル企業や大手ECサイト企業で培った知識と経験をベースに、Salesforceの導入・運用支援や各種SaaSシステムの受託開発を提供しています。
        お客様の課題に10年以上向き合う中で生まれた「楽Platform」を中心に、最適なソリューションをご提案します。
      </p>
    </Fragment>
  </Content>

  <Steps
    title="導入から運用まで伴走します"
    items={[
      {
        title: 'Step 1: 課題ヒアリング',
        description: '現場の課題や業務フローを丁寧にヒアリングし、DX化の方向性を明確にします。',
        icon: 'tabler:message-circle',
      },
      {
        title: 'Step 2: 設計と開発',
        description: '最適なシステム構成を設計し、楽PlatformやSalesforceなどを活用して短期間で構築します。',
        icon: 'tabler:settings',
      },
      {
        title: 'Step 3: 導入と定着支援',
        description: '運用の標準化と定着を支援し、必要に応じて他SaaSやAPI連携にも対応します。',
        icon: 'tabler:rocket',
      },
      {
        title: 'Step 4: 継続的な改善',
        description: '導入後も伴走し、データ活用や業務改善のサイクルを一緒に回していきます。',
        icon: 'tabler:refresh',
      },
    ]}
    image={{
      src: 'https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=2070&q=80',
      alt: 'プロジェクトの進行ステップ',
    }}
  />

  <CallToAction
    actions={[
      {
        variant: 'primary',
        text: 'お問い合わせ',
        href: '/contact',
      },
    ]}
  >
    <Fragment slot="title">ビジネス成長を加速するパートナーにご相談ください</Fragment>

    <Fragment slot="subtitle">
      業務管理システムの導入やDX推進に関するご相談は、Rakucloud株式会社にお任せください。課題の整理から運用定着まで伴走いたします。
    </Fragment>
  </CallToAction>
</Layout>

<script is:inline>
  const initTypewriter = () => {
    document.querySelectorAll('[data-typewriter]').forEach((element) => {
      if (!(element instanceof HTMLElement)) return;
      if (element.dataset.typewriterInitialized === 'true') return;

      const words = JSON.parse(element.dataset.words || '[]');
      if (!Array.isArray(words) || words.length === 0) return;

      element.dataset.typewriterInitialized = 'true';

      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReducedMotion) {
        element.textContent = words[0];
        return;
      }

      let wordIndex = 0;
      let charIndex = 0;
      let isDeleting = false;

      const typeSpeed = 90;
      const deleteSpeed = 50;
      const holdDelay = 1400;
      const restartDelay = 300;

      const tick = () => {
        const word = words[wordIndex] || '';
        charIndex = isDeleting ? charIndex - 1 : charIndex + 1;
        element.textContent = word.slice(0, Math.max(charIndex, 0));

        let delay = isDeleting ? deleteSpeed : typeSpeed;

        if (!isDeleting && charIndex >= word.length) {
          isDeleting = true;
          delay = holdDelay;
        } else if (isDeleting && charIndex <= 0) {
          isDeleting = false;
          wordIndex = (wordIndex + 1) % words.length;
          delay = restartDelay;
        }

        window.setTimeout(tick, delay);
      };

      tick();
    });
  };

  window.addEventListener('load', initTypewriter);
  document.addEventListener('astro:after-swap', initTypewriter);
</script>
